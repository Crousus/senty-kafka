<!DOCTYPE html>
<html>
  <head>
    <title>Senty - Social Media Market Intelligence Platform</title>
    <link rel="stylesheet" href="style.css">
  </head>

  <body>
    <section class="hero-section">
      <h1>Senty</h1>
      <p>Get actionable insights from your social media data.</p>
      <img
        src="https://p-john.com/wp-content/uploads/2022/09/wallpaper.png"
        alt="Senty Image"
      />
    </section>

    <br /><br /><br />

    <form id="order-form" action="./api/cart/order" method="post">
      <h2>Order Form</h2>

      <label for="company-name">Company Name</label>
      <input type="text" id="company-name" name="company-name" required />

      <label for="customer-id">Customer ID</label>
      <input type="text" id="customer-id" name="customer-id" required />

      <label for="video-id">Video ID</label>
      <input type="text" id="video-id" name="video-id" required />

      <label for="tokens">Tokens</label>
      <select
        id="tokens"
        name="tokens"
        required
        onchange="toggleVoucherField()"
      >
        <option value="">Select Tokens</option>
        <option value="10">10</option>
        <option value="100">100</option>
        <option value="1000">1000</option>
        <option value="pay-as-you-go">Pay as you go</option>
        <option value="unlimited">
          Unlimited (<i>Hey Siri, play Never Gonna Give You Up by Rick Astley</i
          >)
        </option>
        <option value="voucher">Voucher</option>
      </select>

      <div id="voucher-code-field" style="display: none">
        <label for="voucher-code">Voucher Code</label>
        <input type="text" id="voucher-code" name="voucher-code" />
      </div>

      <label for="social-media-platform">Social Media Platform</label>
      <select id="social-media-platform" name="social-media-platform" required>
        <option value="">Select Platform</option>
        <option value="YouTube">YouTube</option>
      </select>
      <button onclick="placeOrder()">Order</button>
      <div id="thanks"></div>
    </form>

    <br /><br /><br />

    <script type="text/javascript">
      var count = 0;

      function placeOrder() {
        event.preventDefault();
        $.ajax({
          url: $("#order-form").attr("action"),
          type: $("#order-form").attr("method"),
          data: $("#order-form").serialize(),
        }).done(function (result) {
          count++;
          $("#thanks").html(
            "<div style='padding: 1rem; \n" +
                  "background-color: #ecfdf5; \n" +
                  "border-radius: 0.375rem; '>Thank you for order #" +
              count +
              ".<br>Trace id: <b>" +
              JSON.parse(result).traceId +
              "</b></div>"
          );
        });
      }

      function toggleVoucherField() {
        var voucherField = document.getElementById("voucher-code-field");
        var tokensSelect = document.getElementById("tokens");

        if (tokensSelect.value === "voucher") {
          voucherField.style.display = "block";
          voucherField
            .querySelector("input")
            .setAttribute("required", "required");
        } else {
          voucherField.style.display = "none";
          voucherField.querySelector("input").removeAttribute("required");
        }
      }
    </script>
    <script type="text/javascript" src="./jquery.min.js"></script>
  </body>

</html>
